;; install quicklisp if it does not exists

;(defun install-quicklisp ()
;        (sb-ext:run-program "/usr/bin/curl" '("http://beta.quicklisp.org/quicklisp.lisp" "-o" "/tmp/quicklisp.lisp"))
;        (load "/tmp/quicklisp.lisp"))
;
;(let ((quicklisp-init (merge-pathnames "quicklisp/setup.lisp"
;                                       (user-homedir-pathname))))
;    (if (not (probe-file quicklisp-init)))

;;; The following lines added by ql:add-to-init-file:
#-quicklisp
(let ((quicklisp-init (merge-pathnames "quicklisp/setup.lisp"
                                       (user-homedir-pathname))))
  (when (probe-file quicklisp-init)
    (load quicklisp-init)))
;(setf (ql-config:config-value "proxy-url") "http://127.0.0.1:1087")

;; install linedit if it does not exists
(if (not (ql:where-is-system "linedit"))
    (ql:quickload "linedit"))

;; Check for --no-linedit command-line option.
(if (member "--no-linedit" sb-ext:*posix-argv* :test 'equal)
    (setf sb-ext:*posix-argv* 
	  (remove "--no-linedit" sb-ext:*posix-argv* :test 'equal))
    (when (interactive-stream-p *terminal-io*)
      (require :sb-aclrepl)
      (require :linedit)
      (funcall (intern "INSTALL-REPL" :linedit) :wrap-current t)))
